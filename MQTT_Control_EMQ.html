<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script src="js/jquery-2.1.4.min.js"></script>
	<script src="js/jquery.cookie.min.js"></script>
<link rel="stylesheet" href="css/style.css" crossorigin="anonymous">
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="js/bootstrap.min.js"></script>
	<script src="js/vue.js"></script>
	<script src="js/mqtt.min.js"></script>
	<!-- <script src="js/app.js"></script> -->
	<title></title>
	<meta name="description" />
</head>

<body>
	<div class="container text-center"><img width="300px" src="微信图片_20190701134855.jpg" alt=""></div>
	<div class="container text-center">
		<button type="button" id="ledRedOn" class="btn btn-success btn-lg">红灯开</button>
		<button type="button" id="ledRedOff" class="btn btn-info btn-lg">红灯关</button>
	</div>
	<br>
	<div class="container text-center">
		<button type="button" id="ledGreenOn" class="btn btn-success btn-lg">绿灯开</button>
		<button type="button" id="ledGreenOff" class="btn btn-info btn-lg">绿灯关</button>
	</div>
	<br>
	<div class="container text-center">
		<button type="button" id="ledBlueOn" class="btn btn-success btn-lg">蓝灯开</button>
		<button type="button" id="ledBlueOff" class="btn btn-info btn-lg">蓝灯关</button>
	</div>
	<br>
	<div class="container text-center">
		<button type="button" id="fanOn" class="btn btn-success btn-lg">风扇开</button>
		<button type="button" id="fanOff" class="btn btn-info btn-lg">风扇关</button>
	</div>
	<script>
		var topic_Light = '2018A14128/Light';
        //var topic_Green = '2018A14128/Green';
		//var topic_Blue = '2018A14128/Blue';
		
		const options = {
        connectTimeout: 4000, // 超时时间
        username: '',
        password: '',
        clientId: 'mqttjs_' + (Math.random() * 1000000).toString()
    }
		const client = mqtt.connect('ws://82.156.189.164:8083/mqtt', options)
	 client.on('reconnect', (error) => {
    console.log('正在重连:', error)
})

client.on('error', (error) => {
    console.log('连接失败:', error)
})
		client.on('connect', (e) => {
    console.log('成功连接服务器')
		
		
		$(function(){
			$('#ledRedOn').click(function(){
				client.publish(topic_Light, '1');
			});
			$('#ledRedOff').click(function(){
				client.publish(topic_Light, '2');
			});
			$('#ledGreenOn').click(function(){
				client.publish(topic_Light, '3');
			});
			$('#ledGreenOff').click(function(){
				client.publish(topic_Light, '4');
			});
			$('#ledBlueOn').click(function(){
				client.publish(topic_Light, '5');
			});
			});
			$('#ledBlueOff').click(function(){
				client.publish(topic_Light, '6');
			});
			$('#fanOn').click(function(){
				
			});
			$('#fanOff').click(function(){
				
			});
		});
	</script>
</body>
</html>